         ; IMPLEMENTS USR(ADDR)         ; RETURNS VECTOR AT <ADDR>         ; ALSO KNOWN AS DEEK(ADDR)         ; ÍAARTEN ÐENNINGS 2025 04 23         *= 828 ; CASSETTE BUFFER         ; SET USR() VECTORUSRADD   = 785; $0311         LDA #<MAIN         STA USRADD+0         LDA #>MAIN         STA USRADD+1         RTS         ; THE DEEK() FUNCTIONGETADR   = $B7F7; INT(FAC) TO MEM[POKER]GIVAYF   = $B391; A/Y TO FACADDMEM   = $B867; FAC+=MEM[A/Y]POKER    = $14  ; AKA LINNUMFAC      = $61  ; FLOATING POINT ACCUMAIN     ; FAC PARSED AS INT IN POKER         JSR GETADR         ; DEREF TO GET HI BYTE IN X         LDY #1         LDA (POKER),Y         TAX         ; DEREF TO GET LO BYTE IN Y         DEY         LDA (POKER),Y         TAY         ; LO IN Y, HI IN A, TO FAC         TXA         JSR GIVAYF         ; PROBLEM: IF Y/A>32767 THE         ; FAC IS NOW NEGATIVE         ; SAME PROBLEM NOT FIXED FOR         ; THE FRE() FUNCTION         ; IF FAC>=0 THEN DONE         LDA FAC+5 ; SIGN         BEQ DONE         ; FAC<0 SO ADD 65536,AS FRE()         LDA #<N65536         LDY #>N65536         JSR ADDMEMDONE     ; RETURN FAC         RTS         ; 65536 ENCODED AS FLOATN65536   .BYTE 145,0,0,0,0,0